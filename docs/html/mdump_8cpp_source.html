<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WonderTrader: src/Common/mdump.cpp 源文件</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WonderTrader<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">高性能量化交易平台</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('mdump_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">mdump.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="mdump_8cpp.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">* $Id: mdump.cpp 5561 2009-12-25 07:23:59Z wangmeng $</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">*</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">* this file is part of eMule</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">* Copyright (C)2002-2006 Merkur ( strEmail.Format(&quot;%s@%s&quot;, &quot;devteam&quot;, &quot;emule-project.net&quot;) / http://www.emule-project.net )</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">*</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">* This program is free software; you can redistribute it and/or</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">* modify it under the terms of the GNU General Public License</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">* as published by the Free Software Foundation; either</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">* version 2 of the License, or (at your option) any later version.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">*</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">* This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">* but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">* GNU General Public License for more details.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">*</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">* You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">* along with this program; if not, write to the Free Software</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">* Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">*/</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">/*</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">这段代码实现了一个异常捕获和内存转储功能，主要用于在 Windows 应用程序中捕获未处理的异常，并生成一个内存转储文件，以便开发人员分析和调试崩溃的原因。以下是关键点：</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment"></span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">异常捕获：通过 SetUnhandledExceptionFilter 设置顶层异常过滤器。</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment"></span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">内存转储：使用 MiniDumpWriteDump 函数生成内存转储文件。</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment"></span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">错误报告：调用外部程序 CrashReporter.exe 发送错误报告。</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment"></span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">路径处理：生成转储文件的完整路径，并替换文件名中的特殊字符。</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment"> */</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="mdump_8h.html">mdump.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;dbghelp.h&gt;</span>   <span class="comment">// 用于使用 MiniDumpWriteDump 函数</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;ShellAPI.h&gt;</span> <span class="comment">// 用于调用外部程序（如 CrashReporter.exe）</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;tchar.h&gt;</span>   <span class="comment">// 用于处理宽字符和多字节字符。</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;stdio.h&gt;</span>  <span class="comment">// 用于格式化字符串。</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">   39</a></span><span class="preprocessor">#define ARRSIZE(x)  (sizeof(x)/sizeof(x[0]))  </span><span class="comment">// 计算数组 x 的大小。</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">// 定义一个函数指针类型，指向 MiniDumpWriteDump 函数。</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="mdump_8cpp.html#a58943a8c6cb945af6edaa31115a7c69b">   43</a></span><span class="keyword">typedef</span> <a class="code hl_define" href="types_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a>(WINAPI *<a class="code hl_typedef" href="mdump_8cpp.html#a58943a8c6cb945af6edaa31115a7c69b">MINIDUMPWRITEDUMP</a>)(<a class="code hl_define" href="group__compat.html#gab521aa5010fb1afb801a899a55569e03">HANDLE</a> hProcess, <a class="code hl_typedef" href="WTSExpressData_8hpp.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dwPid, <a class="code hl_define" href="group__compat.html#gab521aa5010fb1afb801a899a55569e03">HANDLE</a> hFile, MINIDUMP_TYPE DumpType,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    CONST PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    CONST PMINIDUMP_USER_STREAM_INFORMATION UserStreamParam,</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    CONST PMINIDUMP_CALLBACK_INFORMATION CallbackParam);</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="mdump_8cpp.html#a57157eb56bfe2b2408e54988a38a8ad5">   48</a></span><a class="code hl_class" href="classCMiniDumper.html">CMiniDumper</a> <a class="code hl_variable" href="mdump_8cpp.html#a57157eb56bfe2b2408e54988a38a8ad5">theCrashDumper</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>TCHAR <a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">CMiniDumper::m_szAppName</a>[MAX_PATH] = { 0 };</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>TCHAR <a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">CMiniDumper::m_szDumpPath</a>[MAX_PATH] = { 0 };</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="foldopen" id="foldopen00052" data-start="{" data-end="}">
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="classCMiniDumper.html#a4bc1259819db0c9ef7afc3264745a146">   52</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCMiniDumper.html#a4bc1259819db0c9ef7afc3264745a146">CMiniDumper::Enable</a>(LPCTSTR pszAppName, <span class="keywordtype">bool</span> bShowErrors, LPCTSTR pszDumpPath<span class="comment">/* = &quot;&quot;*/</span>)</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>{</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// if this assert fires then you have two instances of CMiniDumper which is not allowed</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    _tcsncpy(<a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">m_szAppName</a>, pszAppName, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(<a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">m_szAppName</a>));</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    _tcsncpy(<a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>, pszDumpPath, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(<a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>));</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <a class="code hl_typedef" href="mdump_8cpp.html#a58943a8c6cb945af6edaa31115a7c69b">MINIDUMPWRITEDUMP</a> pfnMiniDumpWriteDump = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    HMODULE hDbgHelpDll = <a class="code hl_function" href="classCMiniDumper.html#ad70168786e606c2d46451fa2fa013b41">GetDebugHelperDll</a>((FARPROC*)&amp;pfnMiniDumpWriteDump, bShowErrors);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="keywordflow">if</span> (hDbgHelpDll)</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <span class="keywordflow">if</span> (pfnMiniDumpWriteDump)</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>            SetUnhandledExceptionFilter(<a class="code hl_function" href="classCMiniDumper.html#a3e1eb7b98919163ecad7211dbbce7107">TopLevelFilter</a>);</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        FreeLibrary(hDbgHelpDll);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        hDbgHelpDll = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        pfnMiniDumpWriteDump = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    }</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>}</div>
</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="foldopen" id="foldopen00070" data-start="{" data-end="}">
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="classCMiniDumper.html#ad70168786e606c2d46451fa2fa013b41">   70</a></span>HMODULE <a class="code hl_function" href="classCMiniDumper.html#ad70168786e606c2d46451fa2fa013b41">CMiniDumper::GetDebugHelperDll</a>(FARPROC* ppfnMiniDumpWriteDump, <span class="keywordtype">bool</span> bShowErrors)</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>{</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    *ppfnMiniDumpWriteDump = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    HMODULE hDll = LoadLibrary(_T(<span class="stringliteral">&quot;DBGHELP.DLL&quot;</span>));</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordflow">if</span> (hDll == <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        <span class="keywordflow">if</span> (bShowErrors) {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>            <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>            MessageBox(<a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, _T(<span class="stringliteral">&quot;DBGHELP.DLL not found. Please install a DBGHELP.DLL.&quot;</span>), <a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">m_szAppName</a>, MB_ICONSTOP | MB_OK);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        }</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    }</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        *ppfnMiniDumpWriteDump = GetProcAddress(hDll, <span class="stringliteral">&quot;MiniDumpWriteDump&quot;</span>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">if</span> (*ppfnMiniDumpWriteDump == <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        {</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>            <span class="keywordflow">if</span> (bShowErrors) {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                MessageBox(<a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, _T(<span class="stringliteral">&quot;DBGHELP.DLL found is too old. Please upgrade to a newer version of DBGHELP.DLL.&quot;</span>), <a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">m_szAppName</a>, MB_ICONSTOP | MB_OK);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    }</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keywordflow">return</span> hDll;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>}</div>
</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classCMiniDumper.html#a3e1eb7b98919163ecad7211dbbce7107">   95</a></span>LONG <a class="code hl_function" href="classCMiniDumper.html#a3e1eb7b98919163ecad7211dbbce7107">CMiniDumper::TopLevelFilter</a>(<span class="keyword">struct</span> _EXCEPTION_POINTERS* pExceptionInfo)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>{</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    LONG lRetValue = EXCEPTION_CONTINUE_SEARCH;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    TCHAR szResult[_MAX_PATH + 1024] = { 0 };</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <a class="code hl_typedef" href="mdump_8cpp.html#a58943a8c6cb945af6edaa31115a7c69b">MINIDUMPWRITEDUMP</a> pfnMiniDumpWriteDump = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    HMODULE hDll = <a class="code hl_function" href="classCMiniDumper.html#ad70168786e606c2d46451fa2fa013b41">GetDebugHelperDll</a>((FARPROC*)&amp;pfnMiniDumpWriteDump, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    HINSTANCE   hInstCrashReporter = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">//ADDED by fengwen on 2006/11/15 : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordflow">if</span> (hDll)</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">if</span> (pfnMiniDumpWriteDump)</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            <span class="comment">//MessageBox(NULL,&quot;test&quot;,&quot;test&quot;,MB_OK);</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            <span class="comment">// Ask user if they want to save a dump file</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            <span class="comment">//COMMENTED by fengwen on 2006/11/15    &lt;begin&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>            <span class="comment">//if (MessageBox(NULL, _T(&quot;eMule crashed :-(\r\n\r\nA diagnostic file can be created which will help the author to resolve this problem. This file will be saved on your Disk (and not sent).\r\n\r\nDo you want to create this file now?&quot;), m_szAppName, MB_ICONSTOP | MB_YESNO) == IDYES)</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            <span class="comment">//COMMENTED by fengwen on 2006/11/15    &lt;end&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                <span class="comment">// Create full path for DUMP file</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                TCHAR szDumpPath[_MAX_PATH] = { 0 };</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                <span class="keywordflow">if</span>(_tcsclen(<a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>) == 0)</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                    GetModuleFileName(<a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, szDumpPath, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szDumpPath));</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                    LPTSTR pszFileName = _tcsrchr(szDumpPath, _T(<span class="charliteral">&#39;\\&#39;</span>));</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                    <span class="keywordflow">if</span> (pszFileName) {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>                        pszFileName++;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                        *pszFileName = _T(<span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                    }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>                }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                    _tcsncpy(szDumpPath, <a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>, _tcsclen(<a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>));</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                    szDumpPath[_tcsclen(<a class="code hl_variable" href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">m_szDumpPath</a>)] = _T(<span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                <span class="comment">// Replace spaces and dots in file name.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                TCHAR szBaseName[_MAX_PATH] = { 0 };</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>                _tcsncat(szBaseName, <a class="code hl_variable" href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">m_szAppName</a>, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szBaseName) - 1);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                LPTSTR psz = szBaseName;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                <span class="keywordflow">while</span> (*psz != _T(<span class="charliteral">&#39;\0&#39;</span>)) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                    <span class="keywordflow">if</span> (*psz == _T(<span class="charliteral">&#39;.&#39;</span>))</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                        *psz = _T(<span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*psz == _T(<span class="charliteral">&#39; &#39;</span>))</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>                        *psz = _T(<span class="charliteral">&#39;_&#39;</span>);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>                    psz++;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                _tcsncat(szDumpPath, szBaseName, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szDumpPath) - 1);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>                SYSTEMTIME curTime;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                GetLocalTime(&amp;curTime);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                <span class="keywordtype">char</span> buf[64];</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                sprintf(buf, <span class="stringliteral">&quot;%4.4d%2.2d%2.2d%2.2d%2.2d%2.2d&quot;</span>, curTime.wYear, curTime.wMonth, curTime.wDay, curTime.wHour, curTime.wMinute, curTime.wSecond);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                strcat(szDumpPath, buf);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                _tcsncat(szDumpPath, _T(<span class="stringliteral">&quot;.dmp&quot;</span>), <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szDumpPath) - 1);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                <a class="code hl_define" href="group__compat.html#gab521aa5010fb1afb801a899a55569e03">HANDLE</a> hFile = CreateFile(szDumpPath, GENERIC_WRITE, FILE_SHARE_WRITE, <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                <span class="keywordflow">if</span> (hFile != <a class="code hl_define" href="group__compat.html#ga5fdc7facea201bfce4ad308105f88d0c">INVALID_HANDLE_VALUE</a>)</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>                {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>                    _MINIDUMP_EXCEPTION_INFORMATION ExInfo = { 0 };</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                    ExInfo.ThreadId = GetCurrentThreadId();</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                    ExInfo.ExceptionPointers = pExceptionInfo;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                    ExInfo.ClientPointers = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                    <a class="code hl_define" href="types_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a> bOK = (*pfnMiniDumpWriteDump)(GetCurrentProcess(), GetCurrentProcessId(), hFile, MiniDumpNormal, &amp;ExInfo, <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                    <span class="keywordflow">if</span> (bOK)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                    {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                        <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                        _sntprintf(szResult, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szResult), _T(<span class="stringliteral">&quot;Saved dump file to \&quot;%s\&quot;.\r\n\r\nPlease send this file together with a detailed bug report to bastet.wang@gmail.com !\r\n\r\nThank you for helping to improve Tsts.&quot;</span>), szDumpPath);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                        lRetValue = EXCEPTION_EXECUTE_HANDLER;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>                        <span class="comment">//ADDED by fengwen on 2006/11/15    &lt;begin&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                        hInstCrashReporter = ShellExecute(<a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, _T(<span class="stringliteral">&quot;open&quot;</span>), _T(<span class="stringliteral">&quot;CrashReporter.exe&quot;</span>), szDumpPath, <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, SW_SHOW);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                        <span class="keywordflow">if</span> (hInstCrashReporter &lt;= (HINSTANCE)32)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>                            lRetValue = EXCEPTION_CONTINUE_SEARCH;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>                        <span class="comment">//ADDED by fengwen on 2006/11/15    &lt;end&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                    }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                    {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                        <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                        _sntprintf(szResult, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szResult), _T(<span class="stringliteral">&quot;Failed to save dump file to \&quot;%s\&quot;.\r\n\r\nError: %u&quot;</span>), szDumpPath, GetLastError());</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                    }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                    CloseHandle(hFile);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                    <span class="comment">// Do *NOT* localize that string (in fact, do not use MFC to load it)!</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                    _sntprintf(szResult, <a class="code hl_define" href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a>(szResult), _T(<span class="stringliteral">&quot;Failed to create dump file \&quot;%s\&quot;.\r\n\r\nError: %u&quot;</span>), szDumpPath, GetLastError());</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                }</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        FreeLibrary(hDll);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        hDll = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        pfnMiniDumpWriteDump = <a class="code hl_define" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">//COMMENTED by fengwen on 2006/11/15    &lt;begin&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">//if (szResult[0] != _T(&#39;\0&#39;))</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">//  MessageBox(NULL, szResult, m_szAppName, MB_ICONINFORMATION | MB_OK);</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="comment">//COMMENTED by fengwen on 2006/11/15    &lt;end&gt; : 使用新的发送错误报告机制。</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="preprocessor">#ifndef _DEBUG</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="keywordflow">if</span> (EXCEPTION_EXECUTE_HANDLER == lRetValue)     <span class="comment">//ADDED by fengwen on 2006/11/15 : 由此filter处理了异常,才去中止进程。</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        <span class="comment">// Exit the process only in release builds, so that in debug builds the exceptio is passed to a possible</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="comment">// installed debugger</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        ExitProcess(0);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    }</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="keywordflow">return</span> lRetValue;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordflow">return</span> lRetValue;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>}</div>
</div>
<div class="ttc" id="aWTSExpressData_8hpp_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="WTSExpressData_8hpp.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition</b> <a href="WTSExpressData_8hpp_source.html#l00021">WTSExpressData.hpp:21</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html"><div class="ttname"><a href="classCMiniDumper.html">CMiniDumper</a></div><div class="ttdef"><b>Definition</b> <a href="mdump_8h_source.html#l00033">mdump.h:34</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html_a3e1eb7b98919163ecad7211dbbce7107"><div class="ttname"><a href="classCMiniDumper.html#a3e1eb7b98919163ecad7211dbbce7107">CMiniDumper::TopLevelFilter</a></div><div class="ttdeci">static LONG WINAPI TopLevelFilter(struct _EXCEPTION_POINTERS *pExceptionInfo)</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00095">mdump.cpp:95</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html_a4bc1259819db0c9ef7afc3264745a146"><div class="ttname"><a href="classCMiniDumper.html#a4bc1259819db0c9ef7afc3264745a146">CMiniDumper::Enable</a></div><div class="ttdeci">static void Enable(LPCTSTR pszAppName, bool bShowErrors, LPCTSTR pszDumpPath=&quot;&quot;)</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00052">mdump.cpp:52</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html_a4fae30e778f6ad2c89923f8a59a2c06b"><div class="ttname"><a href="classCMiniDumper.html#a4fae30e778f6ad2c89923f8a59a2c06b">CMiniDumper::m_szDumpPath</a></div><div class="ttdeci">static TCHAR m_szDumpPath[MAX_PATH]</div><div class="ttdef"><b>Definition</b> <a href="mdump_8h_source.html#l00050">mdump.h:50</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html_ad70168786e606c2d46451fa2fa013b41"><div class="ttname"><a href="classCMiniDumper.html#ad70168786e606c2d46451fa2fa013b41">CMiniDumper::GetDebugHelperDll</a></div><div class="ttdeci">static HMODULE GetDebugHelperDll(FARPROC *ppfnMiniDumpWriteDump, bool bShowErrors)</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00070">mdump.cpp:70</a></div></div>
<div class="ttc" id="aclassCMiniDumper_html_afe1e2a4969da5c88609c5dea83b4dc62"><div class="ttname"><a href="classCMiniDumper.html#afe1e2a4969da5c88609c5dea83b4dc62">CMiniDumper::m_szAppName</a></div><div class="ttdeci">static TCHAR m_szAppName[MAX_PATH]</div><div class="ttdef"><b>Definition</b> <a href="mdump_8h_source.html#l00049">mdump.h:49</a></div></div>
<div class="ttc" id="agroup__compat_html_ga5fdc7facea201bfce4ad308105f88d0c"><div class="ttname"><a href="group__compat.html#ga5fdc7facea201bfce4ad308105f88d0c">INVALID_HANDLE_VALUE</a></div><div class="ttdeci">#define INVALID_HANDLE_VALUE</div><div class="ttdef"><b>Definition</b> <a href="mdb_8c_source.html#l00396">mdb.c:396</a></div></div>
<div class="ttc" id="agroup__compat_html_gab521aa5010fb1afb801a899a55569e03"><div class="ttname"><a href="group__compat.html#gab521aa5010fb1afb801a899a55569e03">HANDLE</a></div><div class="ttdeci">#define HANDLE</div><div class="ttdef"><b>Definition</b> <a href="mdb_8c_source.html#l00390">mdb.c:390</a></div></div>
<div class="ttc" id="amdump_8cpp_html_a57157eb56bfe2b2408e54988a38a8ad5"><div class="ttname"><a href="mdump_8cpp.html#a57157eb56bfe2b2408e54988a38a8ad5">theCrashDumper</a></div><div class="ttdeci">CMiniDumper theCrashDumper</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00048">mdump.cpp:48</a></div></div>
<div class="ttc" id="amdump_8cpp_html_a58943a8c6cb945af6edaa31115a7c69b"><div class="ttname"><a href="mdump_8cpp.html#a58943a8c6cb945af6edaa31115a7c69b">MINIDUMPWRITEDUMP</a></div><div class="ttdeci">BOOL(WINAPI * MINIDUMPWRITEDUMP)(HANDLE hProcess, DWORD dwPid, HANDLE hFile, MINIDUMP_TYPE DumpType, CONST PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam, CONST PMINIDUMP_USER_STREAM_INFORMATION UserStreamParam, CONST PMINIDUMP_CALLBACK_INFORMATION CallbackParam)</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00043">mdump.cpp:43</a></div></div>
<div class="ttc" id="amdump_8cpp_html_a6f3d4709b348c8e91c8f84448c195f69"><div class="ttname"><a href="mdump_8cpp.html#a6f3d4709b348c8e91c8f84448c195f69">ARRSIZE</a></div><div class="ttdeci">#define ARRSIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="mdump_8cpp_source.html#l00039">mdump.cpp:39</a></div></div>
<div class="ttc" id="amdump_8h_html"><div class="ttname"><a href="mdump_8h.html">mdump.h</a></div></div>
<div class="ttc" id="atypes_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="types_8h_source.html#l00295">types.h:295</a></div></div>
<div class="ttc" id="atypes_8h_html_ae4cc35dcc70810fa972cc8a5185a28fa"><div class="ttname"><a href="types_8h.html#ae4cc35dcc70810fa972cc8a5185a28fa">BOOL</a></div><div class="ttdeci">#define BOOL</div><div class="ttdef"><b>Definition</b> <a href="types_8h_source.html#l00305">types.h:305</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ba210d1fa67db7bee1bb22e0a3c11d9f.html">Common</a></li><li class="navelem"><a class="el" href="mdump_8cpp.html">mdump.cpp</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
