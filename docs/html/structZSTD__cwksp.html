<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WonderTrader: ZSTD_cwksp结构体 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WonderTrader<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">高性能量化交易平台</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structZSTD__cwksp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public 属性</a> &#124;
<a href="structZSTD__cwksp-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">ZSTD_cwksp结构体 参考</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public 属性</h2></td></tr>
<tr class="memitem:aaf997d6b32f18dee07fcbe9452d37062" id="r_aaf997d6b32f18dee07fcbe9452d37062"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#aaf997d6b32f18dee07fcbe9452d37062">workspace</a></td></tr>
<tr class="separator:aaf997d6b32f18dee07fcbe9452d37062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbea25172e7dc9c1ac2fbae0e539e74" id="r_a0cbea25172e7dc9c1ac2fbae0e539e74"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a0cbea25172e7dc9c1ac2fbae0e539e74">workspaceEnd</a></td></tr>
<tr class="separator:a0cbea25172e7dc9c1ac2fbae0e539e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8156e41d1ff6c92ceaa75edb56619017" id="r_a8156e41d1ff6c92ceaa75edb56619017"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a8156e41d1ff6c92ceaa75edb56619017">objectEnd</a></td></tr>
<tr class="separator:a8156e41d1ff6c92ceaa75edb56619017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b2a3ebbb454fa0154ae74f27a89594" id="r_a24b2a3ebbb454fa0154ae74f27a89594"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a24b2a3ebbb454fa0154ae74f27a89594">tableEnd</a></td></tr>
<tr class="separator:a24b2a3ebbb454fa0154ae74f27a89594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a28e3c713b260601997c8dd31833ea" id="r_a05a28e3c713b260601997c8dd31833ea"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a05a28e3c713b260601997c8dd31833ea">tableValidEnd</a></td></tr>
<tr class="separator:a05a28e3c713b260601997c8dd31833ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad11c6fcee8a2e1562b754122b3afe165" id="r_ad11c6fcee8a2e1562b754122b3afe165"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#ad11c6fcee8a2e1562b754122b3afe165">allocStart</a></td></tr>
<tr class="separator:ad11c6fcee8a2e1562b754122b3afe165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ef065fce77006bb19787faa8281ffd" id="r_a55ef065fce77006bb19787faa8281ffd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a55ef065fce77006bb19787faa8281ffd">allocFailed</a></td></tr>
<tr class="separator:a55ef065fce77006bb19787faa8281ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e78a023a5bd52056393ac6f3f1e80ae" id="r_a1e78a023a5bd52056393ac6f3f1e80ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a1e78a023a5bd52056393ac6f3f1e80ae">workspaceOversizedDuration</a></td></tr>
<tr class="separator:a1e78a023a5bd52056393ac6f3f1e80ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73353689bb49ac0d357c3ff3c19e44e6" id="r_a73353689bb49ac0d357c3ff3c19e44e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="zstd__cwksp_8h.html#a847d60a839dbaa26818fedaa8b5f2343">ZSTD_cwksp_alloc_phase_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structZSTD__cwksp.html#a73353689bb49ac0d357c3ff3c19e44e6">phase</a></td></tr>
<tr class="separator:a73353689bb49ac0d357c3ff3c19e44e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>Zstd fits all its internal datastructures into a single continuous buffer, so that it only needs to perform a single OS allocation (or so that a buffer can be provided to it and it can perform no allocations at all). This buffer is called the workspace.</p>
<p>Several optimizations complicate that process of allocating memory ranges from this workspace for each internal datastructure:</p>
<ul>
<li>These different internal datastructures have different setup requirements:<ul>
<li>The static objects need to be cleared once and can then be trivially reused for each compression.</li>
<li>Various buffers don't need to be initialized at all&ndash;they are always written into before they're read.</li>
<li>The matchstate tables have a unique requirement that they don't need their memory to be totally cleared, but they do need the memory to have some bound, i.e., a guarantee that all values in the memory they've been allocated is less than some maximum value (which is the starting value for the indices that they will then use for compression). When this guarantee is provided to them, they can use the memory without any setup work. When it can't, they have to clear the area.</li>
</ul>
</li>
<li>These buffers also have different alignment requirements.</li>
<li>We would like to reuse the objects in the workspace for multiple compressions without having to perform any expensive reallocation or reinitialization work.</li>
<li>We would like to be able to efficiently reuse the workspace across multiple compressions <b>even when the compression parameters change</b> and we need to resize some of the objects (where possible).</li>
</ul>
<p>To attempt to manage this buffer, given these constraints, the <a class="el" href="structZSTD__cwksp.html">ZSTD_cwksp</a> abstraction was created. It works as follows:</p>
<p>Workspace Layout:</p>
<p>[ ... workspace ... ] [objects][tables ... -&gt;] free space [&lt;- ... aligned][&lt;- ... buffers]</p>
<p>The various objects that live in the workspace are divided into the following categories, and are allocated separately:</p>
<ul>
<li>Static objects: this is optionally the enclosing ZSTD_CCtx or ZSTD_CDict, so that literally everything fits in a single buffer. Note: if present, this must be the first object in the workspace, since ZSTD_free{CCtx, CDict}() rely on a pointer comparison to see whether one or two frees are required.</li>
<li>Fixed size objects: these are fixed-size, fixed-count objects that are nonetheless "dynamically" allocated in the workspace so that we can control how they're initialized separately from the broader ZSTD_CCtx. Examples:<ul>
<li>Entropy Workspace</li>
<li>2 x <a class="el" href="structZSTD__compressedBlockState__t.html">ZSTD_compressedBlockState_t</a></li>
<li>CDict dictionary contents</li>
</ul>
</li>
<li>Tables: these are any of several different datastructures (hash tables, chain tables, binary trees) that all respect a common format: they are uint32_t arrays, all of whose values are between 0 and (nextSrc - base). Their sizes depend on the cparams.</li>
<li>Aligned: these buffers are used for various purposes that require 4 byte alignment, but don't require any initialization before they're used.</li>
<li>Buffers: these buffers are used for various purposes that don't require any alignment or initialization before they're used. This means they can be moved around at no cost for a new compression.</li>
</ul>
<p>Allocating Memory:</p>
<p>The various types of objects must be allocated in order, so they can be correctly packed into the workspace buffer. That order is:</p>
<ol type="1">
<li>Objects</li>
<li>Buffers</li>
<li>Aligned</li>
<li>Tables</li>
</ol>
<p>Attempts to reserve objects of different types out of order will fail. </p>

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00141">141</a> 行定义.</p>
</div><h2 class="groupheader">类成员变量说明</h2>
<a id="a55ef065fce77006bb19787faa8281ffd" name="a55ef065fce77006bb19787faa8281ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ef065fce77006bb19787faa8281ffd">&#9670;&#160;</a></span>allocFailed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ZSTD_cwksp::allocFailed</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00150">150</a> 行定义.</p>

</div>
</div>
<a id="ad11c6fcee8a2e1562b754122b3afe165" name="ad11c6fcee8a2e1562b754122b3afe165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad11c6fcee8a2e1562b754122b3afe165">&#9670;&#160;</a></span>allocStart</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::allocStart</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00148">148</a> 行定义.</p>

</div>
</div>
<a id="a8156e41d1ff6c92ceaa75edb56619017" name="a8156e41d1ff6c92ceaa75edb56619017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8156e41d1ff6c92ceaa75edb56619017">&#9670;&#160;</a></span>objectEnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::objectEnd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00145">145</a> 行定义.</p>

</div>
</div>
<a id="a73353689bb49ac0d357c3ff3c19e44e6" name="a73353689bb49ac0d357c3ff3c19e44e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73353689bb49ac0d357c3ff3c19e44e6">&#9670;&#160;</a></span>phase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zstd__cwksp_8h.html#a847d60a839dbaa26818fedaa8b5f2343">ZSTD_cwksp_alloc_phase_e</a> ZSTD_cwksp::phase</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00152">152</a> 行定义.</p>

</div>
</div>
<a id="a24b2a3ebbb454fa0154ae74f27a89594" name="a24b2a3ebbb454fa0154ae74f27a89594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b2a3ebbb454fa0154ae74f27a89594">&#9670;&#160;</a></span>tableEnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::tableEnd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00146">146</a> 行定义.</p>

</div>
</div>
<a id="a05a28e3c713b260601997c8dd31833ea" name="a05a28e3c713b260601997c8dd31833ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05a28e3c713b260601997c8dd31833ea">&#9670;&#160;</a></span>tableValidEnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::tableValidEnd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00147">147</a> 行定义.</p>

</div>
</div>
<a id="aaf997d6b32f18dee07fcbe9452d37062" name="aaf997d6b32f18dee07fcbe9452d37062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf997d6b32f18dee07fcbe9452d37062">&#9670;&#160;</a></span>workspace</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::workspace</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00142">142</a> 行定义.</p>

</div>
</div>
<a id="a0cbea25172e7dc9c1ac2fbae0e539e74" name="a0cbea25172e7dc9c1ac2fbae0e539e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cbea25172e7dc9c1ac2fbae0e539e74">&#9670;&#160;</a></span>workspaceEnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ZSTD_cwksp::workspaceEnd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00143">143</a> 行定义.</p>

</div>
</div>
<a id="a1e78a023a5bd52056393ac6f3f1e80ae" name="a1e78a023a5bd52056393ac6f3f1e80ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e78a023a5bd52056393ac6f3f1e80ae">&#9670;&#160;</a></span>workspaceOversizedDuration</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ZSTD_cwksp::workspaceOversizedDuration</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a> 第 <a class="el" href="zstd__cwksp_8h_source.html#l00151">151</a> 行定义.</p>

</div>
</div>
<hr/>该结构体的文档由以下文件生成:<ul>
<li>src/WTSUtils/zstdlib/<a class="el" href="zstd__cwksp_8h_source.html">zstd_cwksp.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structZSTD__cwksp.html">ZSTD_cwksp</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
