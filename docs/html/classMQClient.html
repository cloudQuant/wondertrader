<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WonderTrader: MQClient类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WonderTrader<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">高性能量化交易平台</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classMQClient.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#pri-attribs">Private 属性</a> &#124;
<a href="classMQClient-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">MQClient类 参考</div></div>
</div><!--header-->
<div class="contents">

<p>消息队列客户端类  
 <a href="classMQClient.html#details">更多...</a></p>

<p><code>#include &lt;<a class="el" href="MQClient_8h_source.html">MQClient.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:ab9316f7e035cbb715793d17a02d9897c" id="r_ab9316f7e035cbb715793d17a02d9897c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#ab9316f7e035cbb715793d17a02d9897c">MQClient</a> (<a class="el" href="classMQManager.html">MQManager</a> *mgr)</td></tr>
<tr class="memdesc:ab9316f7e035cbb715793d17a02d9897c"><td class="mdescLeft">&#160;</td><td class="mdescRight">构造函数  <br /></td></tr>
<tr class="separator:ab9316f7e035cbb715793d17a02d9897c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27d8640d03b3e7e5d0119575eceb114" id="r_ac27d8640d03b3e7e5d0119575eceb114"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#ac27d8640d03b3e7e5d0119575eceb114">~MQClient</a> ()</td></tr>
<tr class="memdesc:ac27d8640d03b3e7e5d0119575eceb114"><td class="mdescLeft">&#160;</td><td class="mdescRight">析构函数  <br /></td></tr>
<tr class="separator:ac27d8640d03b3e7e5d0119575eceb114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684db7ce490444344833e3f3366b868c" id="r_a684db7ce490444344833e3f3366b868c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a684db7ce490444344833e3f3366b868c">id</a> () <a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="memdesc:a684db7ce490444344833e3f3366b868c"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取客户端唯一ID  <br /></td></tr>
<tr class="separator:a684db7ce490444344833e3f3366b868c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee52b8c8a232b050c0e4dfdfdd93d25" id="r_a9ee52b8c8a232b050c0e4dfdfdd93d25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a9ee52b8c8a232b050c0e4dfdfdd93d25">init</a> (<a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *url, <a class="el" href="WtMsgQue_2PorterDefs_8h.html#abfe504ced42fb9276c87c445aafadd09">FuncMQCallback</a> cb)</td></tr>
<tr class="memdesc:a9ee52b8c8a232b050c0e4dfdfdd93d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">初始化客户端  <br /></td></tr>
<tr class="separator:a9ee52b8c8a232b050c0e4dfdfdd93d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867cdb990360601ee7afd58952e3f849" id="r_a867cdb990360601ee7afd58952e3f849"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a867cdb990360601ee7afd58952e3f849">start</a> ()</td></tr>
<tr class="memdesc:a867cdb990360601ee7afd58952e3f849"><td class="mdescLeft">&#160;</td><td class="mdescRight">启动客户端  <br /></td></tr>
<tr class="separator:a867cdb990360601ee7afd58952e3f849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f75630d5f8822ce2ba4cf9751e3145f" id="r_a1f75630d5f8822ce2ba4cf9751e3145f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a1f75630d5f8822ce2ba4cf9751e3145f">sub_topic</a> (<a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *topic)</td></tr>
<tr class="memdesc:a1f75630d5f8822ce2ba4cf9751e3145f"><td class="mdescLeft">&#160;</td><td class="mdescRight">订阅指定主题  <br /></td></tr>
<tr class="separator:a1f75630d5f8822ce2ba4cf9751e3145f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a6400f55221b4a99e269db440d2fcb3f2" id="r_a6400f55221b4a99e269db440d2fcb3f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a6400f55221b4a99e269db440d2fcb3f2">extract_buffer</a> ()</td></tr>
<tr class="memdesc:a6400f55221b4a99e269db440d2fcb3f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">从接收缓冲区提取完整消息包  <br /></td></tr>
<tr class="separator:a6400f55221b4a99e269db440d2fcb3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e455d5d44536ed84d9d15491e2e2648" id="r_a1e455d5d44536ed84d9d15491e2e2648"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a1e455d5d44536ed84d9d15491e2e2648">is_allowed</a> (<a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *topic)</td></tr>
<tr class="memdesc:a1e455d5d44536ed84d9d15491e2e2648"><td class="mdescLeft">&#160;</td><td class="mdescRight">检查指定主题是否允许接收  <br /></td></tr>
<tr class="separator:a1e455d5d44536ed84d9d15491e2e2648"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:a015dfdd40402f009fe4d93406a639558" id="r_a015dfdd40402f009fe4d93406a639558"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a015dfdd40402f009fe4d93406a639558">m_strURL</a></td></tr>
<tr class="memdesc:a015dfdd40402f009fe4d93406a639558"><td class="mdescLeft">&#160;</td><td class="mdescRight">服务器连接地址  <br /></td></tr>
<tr class="separator:a015dfdd40402f009fe4d93406a639558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd26c89b617d3db5526bf3104cc6494" id="r_a2cd26c89b617d3db5526bf3104cc6494"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a2cd26c89b617d3db5526bf3104cc6494">m_bReady</a></td></tr>
<tr class="memdesc:a2cd26c89b617d3db5526bf3104cc6494"><td class="mdescLeft">&#160;</td><td class="mdescRight">客户端就绪状态标志  <br /></td></tr>
<tr class="separator:a2cd26c89b617d3db5526bf3104cc6494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1245809e32c99af61f2e54bb96fec402" id="r_a1245809e32c99af61f2e54bb96fec402"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a1245809e32c99af61f2e54bb96fec402">_sock</a></td></tr>
<tr class="memdesc:a1245809e32c99af61f2e54bb96fec402"><td class="mdescLeft">&#160;</td><td class="mdescRight">nanomsg套接字描述符  <br /></td></tr>
<tr class="separator:a1245809e32c99af61f2e54bb96fec402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8848e5d23ce48c65875d95aa1e08573" id="r_aa8848e5d23ce48c65875d95aa1e08573"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMQManager.html">MQManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#aa8848e5d23ce48c65875d95aa1e08573">_mgr</a></td></tr>
<tr class="memdesc:aa8848e5d23ce48c65875d95aa1e08573"><td class="mdescLeft">&#160;</td><td class="mdescRight">消息队列管理器指针  <br /></td></tr>
<tr class="separator:aa8848e5d23ce48c65875d95aa1e08573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60147e6ce1ab3b98b41cebf3e7743b89" id="r_a60147e6ce1ab3b98b41cebf3e7743b89"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a60147e6ce1ab3b98b41cebf3e7743b89">_id</a></td></tr>
<tr class="memdesc:a60147e6ce1ab3b98b41cebf3e7743b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">客户端唯一标识符  <br /></td></tr>
<tr class="separator:a60147e6ce1ab3b98b41cebf3e7743b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0f552601e38a4b61717d138bc69a11" id="r_abb0f552601e38a4b61717d138bc69a11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ThreadUtils.html#gaf9ea8e1e64d43ab034614d39d0b35776">StdThreadPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#abb0f552601e38a4b61717d138bc69a11">m_thrdRecv</a></td></tr>
<tr class="memdesc:abb0f552601e38a4b61717d138bc69a11"><td class="mdescLeft">&#160;</td><td class="mdescRight">接收线程指针  <br /></td></tr>
<tr class="separator:abb0f552601e38a4b61717d138bc69a11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2c2afcf23ed98c92451c6cf639e91f" id="r_a0b2c2afcf23ed98c92451c6cf639e91f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a0b2c2afcf23ed98c92451c6cf639e91f">m_bTerminated</a></td></tr>
<tr class="memdesc:a0b2c2afcf23ed98c92451c6cf639e91f"><td class="mdescLeft">&#160;</td><td class="mdescRight">终止标志  <br /></td></tr>
<tr class="separator:a0b2c2afcf23ed98c92451c6cf639e91f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9a0a90b8def91312dec8ac93ea8d42d" id="r_ab9a0a90b8def91312dec8ac93ea8d42d"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#ab9a0a90b8def91312dec8ac93ea8d42d">m_iCheckTime</a></td></tr>
<tr class="memdesc:ab9a0a90b8def91312dec8ac93ea8d42d"><td class="mdescLeft">&#160;</td><td class="mdescRight">最后一次接收数据的时间戳  <br /></td></tr>
<tr class="separator:ab9a0a90b8def91312dec8ac93ea8d42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452366fc81bab04b4a1a42dd009e300a" id="r_a452366fc81bab04b4a1a42dd009e300a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a452366fc81bab04b4a1a42dd009e300a">m_bNeedCheck</a></td></tr>
<tr class="memdesc:a452366fc81bab04b4a1a42dd009e300a"><td class="mdescLeft">&#160;</td><td class="mdescRight">需要检查连接状态的标志  <br /></td></tr>
<tr class="separator:a452366fc81bab04b4a1a42dd009e300a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c9abfb5654f5308fd2d318955de3db" id="r_a05c9abfb5654f5308fd2d318955de3db"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a05c9abfb5654f5308fd2d318955de3db">_buffer</a></td></tr>
<tr class="memdesc:a05c9abfb5654f5308fd2d318955de3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">接收数据缓冲区  <br /></td></tr>
<tr class="separator:a05c9abfb5654f5308fd2d318955de3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a0eed02ff82325c93b7e7d359863eb6" id="r_a7a0eed02ff82325c93b7e7d359863eb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="WtMsgQue_2PorterDefs_8h.html#abfe504ced42fb9276c87c445aafadd09">FuncMQCallback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a7a0eed02ff82325c93b7e7d359863eb6">_cb_message</a></td></tr>
<tr class="memdesc:a7a0eed02ff82325c93b7e7d359863eb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">消息回调函数  <br /></td></tr>
<tr class="separator:a7a0eed02ff82325c93b7e7d359863eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db3be5b195fadc688361137dba22a62" id="r_a3db3be5b195fadc688361137dba22a62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwt__hashset.html">wt_hashset</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a3db3be5b195fadc688361137dba22a62">_topics</a></td></tr>
<tr class="memdesc:a3db3be5b195fadc688361137dba22a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">订阅主题集合  <br /></td></tr>
<tr class="separator:a3db3be5b195fadc688361137dba22a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d8590984f2b3879e292935b45037fd0" id="r_a3d8590984f2b3879e292935b45037fd0"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMQClient.html#a3d8590984f2b3879e292935b45037fd0">_recv_buf</a> [1024 *1024]</td></tr>
<tr class="memdesc:a3d8590984f2b3879e292935b45037fd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">接收缓冲区  <br /></td></tr>
<tr class="separator:a3d8590984f2b3879e292935b45037fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>消息队列客户端类 </p>
<p>基于nanomsg实现的消息队列客户端，用于订阅和接收消息 支持按主题订阅和过滤消息，并通过回调函数处理收到的消息 内部实现了连接状态检测和消息分包处理 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00027">27</a> 行定义.</p>
</div><h2 class="groupheader">构造及析构函数说明</h2>
<a id="ab9316f7e035cbb715793d17a02d9897c" name="ab9316f7e035cbb715793d17a02d9897c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9316f7e035cbb715793d17a02d9897c">&#9670;&#160;</a></span>MQClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQClient::MQClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMQManager.html">MQManager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>构造函数 </p>
<p>构造函数实现</p>
<p>创建消息队列客户端实例，并分配唯一的客户端 ID </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>消息队列管理器指针，用于日志记录和客户端管理</td></tr>
  </table>
  </dd>
</dl>
<p>初始化客户端对象的所有成员变量，并分配唯一的客户端 ID 初始状态下套接字无效，客户端未就绪，未终止，无回调函数 </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>消息队列管理器指针，用于日志记录和客户端管理 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">在文件 <a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a> 第 <a class="el" href="MQClient_8cpp_source.html#l00048">48</a> 行定义.</p>

</div>
</div>
<a id="ac27d8640d03b3e7e5d0119575eceb114" name="ac27d8640d03b3e7e5d0119575eceb114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac27d8640d03b3e7e5d0119575eceb114">&#9670;&#160;</a></span>~MQClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MQClient::~MQClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>析构函数 </p>
<p>析构函数实现</p>
<p>清理客户端资源，关闭网络连接并停止接收线程</p>
<p>清理客户端资源，包括停止接收线程和关闭网络连接 如果客户端未就绪，则直接返回不进行清理 否则设置终止标志，等待接收线程结束，并关闭套接字 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a> 第 <a class="el" href="MQClient_8cpp_source.html#l00066">66</a> 行定义.</p>

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a6400f55221b4a99e269db440d2fcb3f2" name="a6400f55221b4a99e269db440d2fcb3f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6400f55221b4a99e269db440d2fcb3f2">&#9670;&#160;</a></span>extract_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MQClient::extract_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>从接收缓冲区提取完整消息包 </p>
<p>从接收缓冲区提取完整消息包实现</p>
<p>处理接收缓冲区中的数据，将其分解为多个消息包 对每个消息包进行主题过滤，并通过回调函数处理符合条件的消息</p>
<p>处理接收缓冲区中的数据，将其分解为多个消息包 对每个消息包进行长度检查和主题过滤 如果消息主题符合订阅条件，则通过回调函数处理消息 处理完成后，从缓冲区中移除已处理的数据 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a> 第 <a class="el" href="MQClient_8cpp_source.html#l00202">202</a> 行定义.</p>

</div>
</div>
<a id="a684db7ce490444344833e3f3366b868c" name="a684db7ce490444344833e3f3366b868c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a684db7ce490444344833e3f3366b868c">&#9670;&#160;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MQClient::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取客户端唯一ID </p>
<p>返回创建客户端时分配的唯一标识符 </p><dl class="section return"><dt>返回</dt><dd>客户端唯一ID </dd></dl>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00076">76</a> 行定义.</p>

</div>
</div>
<a id="a9ee52b8c8a232b050c0e4dfdfdd93d25" name="a9ee52b8c8a232b050c0e4dfdfdd93d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee52b8c8a232b050c0e4dfdfdd93d25">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MQClient::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="WtMsgQue_2PorterDefs_8h.html#abfe504ced42fb9276c87c445aafadd09">FuncMQCallback</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>初始化客户端 </p>
<p>初始化客户端实现</p>
<p>创建并配置消息队列套接字，连接到指定的服务地址 设置消息接收回调函数和缓冲区大小 </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>服务器地址，格式如"tcp://127.0.0.1:5555" </td></tr>
    <tr><td class="paramname">cb</td><td>消息接收回调函数，用于处理收到的消息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>初始化成功返回true，失败返回false</dd></dl>
<p>创建并配置消息队列套接字，连接到指定的服务地址 如果客户端已经初始化，则直接返回true 初始化过程包括：设置回调函数、创建套接字、设置订阅选项、设置缓冲区大小、连接服务器 </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>服务器地址，格式如"tcp://127.0.0.1:5555" </td></tr>
    <tr><td class="paramname">cb</td><td>消息接收回调函数，用于处理收到的消息 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>初始化成功返回true，失败返回false </dd></dl>

<p class="definition">在文件 <a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a> 第 <a class="el" href="MQClient_8cpp_source.html#l00088">88</a> 行定义.</p>

</div>
</div>
<a id="a1e455d5d44536ed84d9d15491e2e2648" name="a1e455d5d44536ed84d9d15491e2e2648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e455d5d44536ed84d9d15491e2e2648">&#9670;&#160;</a></span>is_allowed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MQClient::is_allowed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>检查指定主题是否允许接收 </p>
<p>如果没有设置订阅主题（_topics为空），则接收所有主题 否则只接收已订阅的主题 </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>要检查的消息主题 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>如果允许接收该主题返回true，否则返回false </dd></dl>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00058">58</a> 行定义.</p>

</div>
</div>
<a id="a867cdb990360601ee7afd58952e3f849" name="a867cdb990360601ee7afd58952e3f849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a867cdb990360601ee7afd58952e3f849">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MQClient::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>启动客户端 </p>
<p>启动客户端实现</p>
<p>创建并启动接收线程，开始接收消息 如果客户端已经启动或未初始化，则不会重复启动 接收线程会持续监听消息并处理连接超时检测</p>
<p>创建并启动接收线程，开始接收消息 如果客户端已经终止或未初始化，则不会启动 接收线程会持续监听消息，并在收到数据时处理 同时实现了连接超时检测机制，当超过60秒未收到数据时发送超时通知 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a> 第 <a class="el" href="MQClient_8cpp_source.html#l00130">130</a> 行定义.</p>

</div>
</div>
<a id="a1f75630d5f8822ce2ba4cf9751e3145f" name="a1f75630d5f8822ce2ba4cf9751e3145f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f75630d5f8822ce2ba4cf9751e3145f">&#9670;&#160;</a></span>sub_topic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MQClient::sub_topic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>订阅指定主题 </p>
<p>将指定的主题添加到订阅列表中 当没有订阅任何主题时，客户端会接收所有主题的消息 订阅主题后，只会接收指定主题的消息 </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>要订阅的主题名称 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00103">103</a> 行定义.</p>

</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a id="a05c9abfb5654f5308fd2d318955de3db" name="a05c9abfb5654f5308fd2d318955de3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05c9abfb5654f5308fd2d318955de3db">&#9670;&#160;</a></span>_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MQClient::_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>接收数据缓冲区 </p>
<p>存储从套接字接收的原始数据，等待解析 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00147">147</a> 行定义.</p>

</div>
</div>
<a id="a7a0eed02ff82325c93b7e7d359863eb6" name="a7a0eed02ff82325c93b7e7d359863eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a0eed02ff82325c93b7e7d359863eb6">&#9670;&#160;</a></span>_cb_message</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="WtMsgQue_2PorterDefs_8h.html#abfe504ced42fb9276c87c445aafadd09">FuncMQCallback</a> MQClient::_cb_message</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>消息回调函数 </p>
<p>当接收到消息时调用的回调函数，用于处理消息 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00151">151</a> 行定义.</p>

</div>
</div>
<a id="a60147e6ce1ab3b98b41cebf3e7743b89" name="a60147e6ce1ab3b98b41cebf3e7743b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60147e6ce1ab3b98b41cebf3e7743b89">&#9670;&#160;</a></span>_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MQClient::_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>客户端唯一标识符 </p>
<p>由makeMQCientId函数生成的唯一ID，从5001开始递增 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00127">127</a> 行定义.</p>

</div>
</div>
<a id="aa8848e5d23ce48c65875d95aa1e08573" name="aa8848e5d23ce48c65875d95aa1e08573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8848e5d23ce48c65875d95aa1e08573">&#9670;&#160;</a></span>_mgr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMQManager.html">MQManager</a>* MQClient::_mgr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>消息队列管理器指针 </p>
<p>用于日志记录和客户端管理的管理器对象 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00123">123</a> 行定义.</p>

</div>
</div>
<a id="a3d8590984f2b3879e292935b45037fd0" name="a3d8590984f2b3879e292935b45037fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8590984f2b3879e292935b45037fd0">&#9670;&#160;</a></span>_recv_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char MQClient::_recv_buf[1024 *1024]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>接收缓冲区 </p>
<p>用于从套接字接收数据的临时缓冲区，大小为1MB </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00159">159</a> 行定义.</p>

</div>
</div>
<a id="a1245809e32c99af61f2e54bb96fec402" name="a1245809e32c99af61f2e54bb96fec402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1245809e32c99af61f2e54bb96fec402">&#9670;&#160;</a></span>_sock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MQClient::_sock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>nanomsg套接字描述符 </p>
<p>用于与消息服务器通信的套接字，-1表示无效套接字 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00119">119</a> 行定义.</p>

</div>
</div>
<a id="a3db3be5b195fadc688361137dba22a62" name="a3db3be5b195fadc688361137dba22a62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db3be5b195fadc688361137dba22a62">&#9670;&#160;</a></span>_topics</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwt__hashset.html">wt_hashset</a>&lt;std::string&gt; MQClient::_topics</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>订阅主题集合 </p>
<p>存储已订阅的主题列表，空集合表示接收所有主题 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00155">155</a> 行定义.</p>

</div>
</div>
<a id="a452366fc81bab04b4a1a42dd009e300a" name="a452366fc81bab04b4a1a42dd009e300a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452366fc81bab04b4a1a42dd009e300a">&#9670;&#160;</a></span>m_bNeedCheck</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MQClient::m_bNeedCheck</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>需要检查连接状态的标志 </p>
<p>标记是否需要进行连接超时检查 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00143">143</a> 行定义.</p>

</div>
</div>
<a id="a2cd26c89b617d3db5526bf3104cc6494" name="a2cd26c89b617d3db5526bf3104cc6494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cd26c89b617d3db5526bf3104cc6494">&#9670;&#160;</a></span>m_bReady</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MQClient::m_bReady</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>客户端就绪状态标志 </p>
<p>标记客户端是否已成功初始化并准备好接收消息 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00115">115</a> 行定义.</p>

</div>
</div>
<a id="a0b2c2afcf23ed98c92451c6cf639e91f" name="a0b2c2afcf23ed98c92451c6cf639e91f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b2c2afcf23ed98c92451c6cf639e91f">&#9670;&#160;</a></span>m_bTerminated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MQClient::m_bTerminated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>终止标志 </p>
<p>标记客户端是否已请求终止，用于控制接收线程退出 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00135">135</a> 行定义.</p>

</div>
</div>
<a id="ab9a0a90b8def91312dec8ac93ea8d42d" name="ab9a0a90b8def91312dec8ac93ea8d42d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9a0a90b8def91312dec8ac93ea8d42d">&#9670;&#160;</a></span>m_iCheckTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t MQClient::m_iCheckTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最后一次接收数据的时间戳 </p>
<p>用于检测连接超时，单位为毫秒 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00139">139</a> 行定义.</p>

</div>
</div>
<a id="a015dfdd40402f009fe4d93406a639558" name="a015dfdd40402f009fe4d93406a639558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015dfdd40402f009fe4d93406a639558">&#9670;&#160;</a></span>m_strURL</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MQClient::m_strURL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>服务器连接地址 </p>
<p>存储nanomsg服务器的URL，格式如"tcp://127.0.0.1:5555" </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00111">111</a> 行定义.</p>

</div>
</div>
<a id="abb0f552601e38a4b61717d138bc69a11" name="abb0f552601e38a4b61717d138bc69a11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0f552601e38a4b61717d138bc69a11">&#9670;&#160;</a></span>m_thrdRecv</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ThreadUtils.html#gaf9ea8e1e64d43ab034614d39d0b35776">StdThreadPtr</a> MQClient::m_thrdRecv</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>接收线程指针 </p>
<p>负责接收消息的后台线程 </p>

<p class="definition">在文件 <a class="el" href="MQClient_8h_source.html">MQClient.h</a> 第 <a class="el" href="MQClient_8h_source.html#l00131">131</a> 行定义.</p>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>src/WtMsgQue/<a class="el" href="MQClient_8h_source.html">MQClient.h</a></li>
<li>src/WtMsgQue/<a class="el" href="MQClient_8cpp_source.html">MQClient.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMQClient.html">MQClient</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
